# 弹弹堂七道经典服糖果面验证码登录插件
## 前言
- 七道官方加了一个滑块验证码用来防脚本(事实上只防住了几个小时), 却苦了广大玩家——每次上号都要多滑一个验证码, 还经常因为验证码加载或参数错误导致上不去号; 此外, 36脚本大厅登录不需要验证码, 因此一定存在绕过验证码的方法。
- 本项目通过本地中间人代理拦截请求, 调用登录接口并写入response实现了绕过验证码的登录功能。
- 本项目仅供学习与研究目的，禁止用于非法用途。
## 使用
下载并解压插件到本地，先启动插件，再打开糖果浏览器
然后上号即可跳过验证码
## 原理
弹弹堂官网点击登录按钮时的流程存在漏洞
1. 跳转到滑块验证码
2. 验证码通过后跳转到账号密码验证
3. 验证通过再跳转到游戏页面
问题出现在第二步：账号密码验证的接口并没有关注是否通过了滑块验证码
因此直接在后台登录并写入cookie即可跳过验证码完成登录

## 插件登录流程
1. 插件启动时修改糖果浏览器账号配置文件，在游戏url后面添加?username=xxx，记录每个username对应的密码
2. 修改糖果浏览器代理配置文件，启用127.0.0.1:8888的代理
3. 拦截http://www.wan.com/game/play/id/8665.html?username=xxx的response，从中获取username
4. 从1.中获取username对应的密码
5. 后台调用登录接口，获得cookies
6. cookies写入response的Set-Cookie header
此时因为response已经包含了登录后的cookies，所以已经登录成功，验证码不会弹出，直接进入游戏加载界面

## Q&A
1. 软件不生效
依次检查下列内容
   1. 糖果右上角 工具-代理服务器设置 里面有免验证码这一项，且已经启用(左侧有个√)
   2. 糖果左侧账号列表，右键编辑账号
      1. 查看游戏网址后面是否有"?username=账号", 正常情况要有
      2. 检查你的游戏网址是不是"http://www.wan.com/game/play/id/8665.html"开头
1. 官方会检测到吗?会封号吗?
- A: 官方可以检测到这次登录没有经过验证码。不确定会不会封号，但目前另一款常用登录器36脚本大厅的登录也是类似的原理，目前没有发现使用36被封号的
1. 为什么我糖果断网了?
- A: 因为插件自动开启了本地代理，不打开插件糖果就无法访问网络。可以手动取消代理，如图所示
![](http://qiniu.apale7.cn/20250319211518.png)
1. 糖果账号损坏
可能是软件存在bug, 可以尝试以下恢复方式
糖果配置文件所在的目录: %LOCALAPPDATA%\TGGAME
打开此目录，可以看到accouts2_old.dat和accouts2.dat，删除accouts2.dat, 把accouts2_old.dat重命名为accouts2_old.dat即可恢复